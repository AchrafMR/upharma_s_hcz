(self.webpackChunk=self.webpackChunk||[]).push([[976],{26189:(e,t,o)=>{"use strict";var s=o(6672),n=o.n(s);const a=JSON.parse('{"base_url":"","routes":{"app_login":{"tokens":[["text","/login"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_logout":{"tokens":[["text","/logout"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_module_list":{"tokens":[["text","/setting/module/list"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_module_add":{"tokens":[["text","/setting/module/add"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_module_toggle_active":{"tokens":[["variable","/","[^/]++","module",true],["text","/setting/module/activer"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_sousmodule_list":{"tokens":[["text","/setting/sousmodule/list"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_sousmodule_add":{"tokens":[["text","/setting/sousmodule/add"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_sousmodule_toggle_active":{"tokens":[["variable","/","[^/]++","sousmodule",true],["text","/setting/sousmodule/activer"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_assign_convention":{"tokens":[["text","/user/assign-convention"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["POST"],"schemes":[]},"app_assign_caisse":{"tokens":[["text","/user/assign-caisse"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["POST"],"schemes":[]},"app_duplicate_user":{"tokens":[["text","/user/duplicate-user"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["POST"],"schemes":[]}},"prefix":"","host":"localhost","port":"","scheme":"http","locale":""}');n().setRoutingData(a)},87286:(e,t,o)=>{function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function n(e,t,o){return(t=function(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===s(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o(57658),o(47042),o(38862),o(68309),o(69826),o(41539),o(96649),o(96078),o(82526),o(41817),o(21703),o(96647),o(9653),o(69070),o(32165),o(66992),o(78783),o(33948);o(44500).Toaster;$(document).ready((function(){var e;$("body").on("click",".menu-item",(function(){var e=$(this).attr("id");$("body #subMenu"+e).toggle("3s")})),$("body").on("click",".subMenu-item",(function(){var e=$(this).attr("id");$("body #action"+e).toggle("3s")})),$("body").on("click","#myTable tbody tr",(function(){$("#myTable tbody tr").removeClass("colorRow"),$(this).toggleClass("colorRow")})),$("body").on("click",".affectUser",(function(){var e=$(".colorRow").attr("id"),t=$("#dossier").val();e?$.ajax({type:"POST",url:"userActions",data:{idUser:e,idSite:t},success:function(e){$("#actionsAffectedToUser").empty(),$("#dossier").val("").trigger("change"),$("#affectUser").modal("show")},error:function(){toastr.error("ERROR !")}}):toastr.warning("Choisir un utilisateur!")})),$("body").on("click",".saveAffectButton",(function(){var e=[],t=[],o=$(".colorRow").attr("id"),s=$("#dossier").val();$("input.checkboxAction:checkbox:checked").each((function(){e.push($(this).attr("id").slice(12))})),$("input.checkboxAction:checkbox:not(:checked)").each((function(){t.push($(this).attr("id").slice(12))}));var n=JSON.stringify(e),a=JSON.stringify(t),i=ladda.create(document.activeElement);i.start(),$.ajax({type:"POST",url:"affectUser",data:{idUser:o,idSite:s,jsonCheckedActions:n,jsonUncheckedActions:a},success:function(e){toastr.success(e.affected+" AFFECTE - "+e.notAffected+" NON AFFECTE"),i.stop()},error:function(){toastr.error("ERROR !"),i.stop()}})})),$("body").on("click","#btn_affectUser",(function(e){$(".colorRow").attr("id")?($("#actionsAffectedToUser").empty(),$("#dossier").val("").trigger("change"),$("#affectUser").modal("toggle")):toastr.info("Selectionez un utilisateur svp !")})),console.log("hi"),$("body").on("change","#dossier",(function(){""!=$(this).val()&&$.ajax({type:"POST",url:"userActions",data:{idUser:$(".colorRow").attr("id"),idSite:$(this).val()},success:function(e){$("#actionsAffectedToUser").empty().append(e)},error:function(){toastr.error("ERROR !")}})}));var t=$("#convention_table").DataTable({language:{url:window.frenchJsonUrl},columnDefs:[{orderable:!1,targets:0}],lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Tous"]],pageLength:10});function o(e){var t=e.table().node(),o=$('tbody input[type="checkbox"]:not(:disabled)',t),s=$('tbody input[type="checkbox"]:checked:not(:disabled)',t),n=$('thead input[name="select_all"]',t).get(0);0===s.length?(n.checked=!1,"indeterminate"in n&&(n.indeterminate=!1)):s.length===o.length?(n.checked=!0,"indeterminate"in n&&(n.indeterminate=!1)):(n.checked=!0,"indeterminate"in n&&(n.indeterminate=!0))}$("body").on("click",".assignConvention",(function(){(e=$(".colorRow").attr("id"))?$.ajax({url:"findUser",method:"POST",data:{idUser:e,convention:!0},success:function(e){data=e.data,$("#user_name").val(data.username),$("#user_nom").val(data.name),$("#user_profession").val(data.professionDescription),$("#convention_table tbody").empty(),$.fn.DataTable.isDataTable("body #convention_table")&&$("#convention_table").DataTable().destroy(),$("body #list_convention").empty().append(e.html),o(t=$("#convention_table").DataTable({language:{url:window.frenchJsonUrl},columnDefs:[{orderable:!1,targets:0}],lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Tous"]],pageLength:10})),$("#assign_convention").modal("show")},error:function(e,t,o){toastr.error(e.responseText)}}):toastr.info("Choisir un utilisateur!")})),$("#convention_table tbody").on("change",'input[type="checkbox"]:enabled',(function(){var e=$(this).closest("tr");this.checked?e.addClass("colorRow"):e.removeClass("colorRow"),o(t)})),$("#convention_table tbody").on("click","tr",(function(e){if("checkbox"!==e.target.type){var t=$(this).find('input[type="checkbox"]:enabled');t.prop("checked",!t.prop("checked")).trigger("change")}})),$("#convention_table thead").on("change",'input[name="select_all"]',(function(){var e=this.checked;$('#convention_table tbody input[type="checkbox"]:enabled').each((function(){this.disabled||this.checked!==e&&$(this).prop("checked",e).trigger("change")}))})),$("body").on("click",".saveAssignConvention",(function(){var t=ladda.create(document.activeElement);t.start();var o=[];$("#convention_table tbody tr").each((function(){var e=$(this).find('input[type="checkbox"]');e.is(":checked")&&o.push(e.val())}));var s={conventionIds:o,id_user:e};$.ajax({url:Routing.generate("app_assign_convention"),method:"POST",contentType:"application/json",data:JSON.stringify(s),success:function(e){t.stop(),toastr.success(e),$("#assign_convention").modal("hide")},error:function(e,o,s){return t.stop(),toastr.error(e.responseText)}})}));var s=$("#caisse_table").DataTable({language:{url:window.frenchJsonUrl}});$("body").on("click",".assignCaisse",(function(){(e=$(".colorRow").attr("id"))?$.ajax({url:"findUser",method:"POST",data:{idUser:e,caisse:!0},success:function(e){data=e.data,$("#user_name_caisse").val(data.username),$("#user_nom_caisse").val(data.name),$("#user_profession_caisse").val(data.professionDescription),$.fn.DataTable.isDataTable("body #caisse_table")&&$("#caisse_table").DataTable().destroy(),$("body #list_caisse").empty().append(e.html),s=$("#caisse_table").DataTable({language:{url:window.frenchJsonUrl}}),$("#caisse_table tbody tr").each((function(){$(this).find('input[type="checkbox"]').is(":checked")&&$(this).addClass("colorRow")})),$("#assign_caisse").modal("show")},error:function(e,t,o){toastr.error(e.responseText)}}):toastr.info("Choisir un utilisateur!")})),$("body").on("click","#caisse_table tbody tr",(function(){$(this).hasClass("colorRow")?($(this).removeClass("colorRow"),$(this).find('input[type="checkbox"]').prop("checked",!1)):(s.$("tr").removeClass("colorRow"),s.$('input[type="checkbox"]').prop("checked",!1),$(this).addClass("colorRow"),$(this).find('input[type="checkbox"]').prop("checked",!0))})),$("body").on("click",".saveAssignCaisse",(function(){var t,o=ladda.create(document.activeElement);o.start();var a=s.rows(".colorRow").data().length>0?s.rows(".colorRow").data()[0][1]:null;$.ajax((n(t={type:"POST",url:Routing.generate("app_assign_caisse"),contentType:"application/json",data:JSON.stringify({selectedCaisse:a,id_user:e}),processData:!1},"contentType",!1),n(t,"success",(function(e){o.stop(),toastr.success(e),$("#assign_caisse").modal("hide")})),n(t,"error",(function(e,t,s){return o.stop(),toastr.error(e.responseText)})),t))})),$("body").on("click",".duplicate",(function(){(e=$(".colorRow").attr("id"))?$("#duplicate_user").modal("show"):toastr.info("Choisir un utilisateur!")})),$("body").on("submit","#duplicateUserForm",(function(t){t.preventDefault(),e=$(".colorRow").attr("id");var o=$("#duplicated_username").val(),s=$("#duplicated_nom").val(),n=$("#duplicated_password").val();if(e){var a={id_user:e,username:o,name:s,password:n},i=ladda.create(document.activeElement);i.start(),$.ajax({url:Routing.generate("app_duplicate_user"),method:"POST",contentType:"application/json",data:JSON.stringify(a),success:function(e){toastr.success("Utilisateur dupliqué avec succès"),i.stop(),$("#duplicate_user").modal("hide"),$("#duplicated_username").val(""),$("#duplicated_nom").val(""),$("#duplicated_password").val(""),$.fn.dataTable.isDataTable("#myTable")&&$("#myTable").DataTable().clear().destroy(),$("#listUsers").html(e.html),$("#myTable").DataTable({lengthMenu:[[15,25,50,-1],[15,25,50,"All"]],autoWidth:!1})},error:function(e,t,o){toastr.error(e.responseText),i.stop()}})}else toastr.info("Choisir un utilisateur!")}))}))}},e=>{var t=t=>e(e.s=t);e.O(0,[593,193,216],(()=>(t(26189),t(87286))));e.O()}]);